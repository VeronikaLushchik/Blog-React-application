{"version":3,"sources":["api/api.ts","api/posts.ts","components/NewPostForm/NewPostForm.tsx","components/PostsList/PostsList.tsx","api/comments.ts","components/NewCommentForm/NewCommentForm.tsx","components/PostDetails/PostDetails.tsx","App.tsx","index.tsx"],"names":["BASE_URL","request","url","a","item","fetch","response","json","addPost","newPost","method","headers","body","JSON","stringify","getPosts","getPostDetails","postId","deletePost","NewPostForm","props","onAdd","useState","title","setTitle","setBody","className","onSubmit","event","preventDefault","type","name","placeholder","value","onChange","target","PostsList","selectedPostId","selectPost","posts","setPosts","useEffect","then","map","post","onClick","id","getPostComments","addComment","newComment","deleteComment","commentsId","NewCommentForm","PostDetails","setPost","comments","setComments","isVisible","setVisible","length","comment","App","setPostId","ReactDOM","render","document","getElementById"],"mappings":"yVAAaA,EAAW,mCAEXC,EAAO,uCAAG,WAAOC,GAAP,6BAAAC,EAAA,6DAAmBC,EAAnB,+BAA0B,GAA1B,SACEC,MAAM,GAAD,OAAIL,EAAJ,YAAgBE,GAAOE,GAD9B,cACfE,EADe,yBAGdA,EAASC,QAHK,2CAAH,sDCAPC,EAAO,uCAAG,WAAOC,GAAP,SAAAN,EAAA,+EACdF,EAAQ,QAAS,CACtBS,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAUL,MANF,2CAAH,sDAUPM,EAAQ,uCAAG,sBAAAZ,EAAA,+EACfF,EAAQ,QAAS,CACtBS,OAAQ,MACRC,QAAS,CACP,eAAgB,uBAJE,2CAAH,qDASRK,EAAc,uCAAG,WAAOC,GAAP,SAAAd,EAAA,+EACrBF,EAAQ,SAAD,OAAUgB,EAAV,sBADc,2CAAH,sDAIdC,EAAU,uCAAG,WAAOD,GAAP,SAAAd,EAAA,+EACjBF,EAAQ,SAAD,OAAUgB,GAAU,CAAEP,OAAQ,YADpB,2CAAH,sD,qBClBVS,EAA+B,SAACC,GAC3C,IAAQC,EAAUD,EAAVC,MACR,EAA0BC,mBAAS,IAAnC,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAAwBF,mBAAS,IAAjC,mBAAOV,EAAP,KAAaa,EAAb,KAcA,OACE,uBAAMC,UAAU,cAAcC,SAbX,SAACC,GACpBA,EAAMC,iBAENR,EAAM,CACJE,QACAX,SAGFY,EAAS,IACTC,EAAQ,KAIR,UACE,qBAAKC,UAAU,aAAf,SACE,uBACEI,KAAK,OACLC,KAAK,QACLC,YAAY,aACZN,UAAU,qBACVO,MAAOV,EACPW,SAAU,SAACN,GAAD,OAAWJ,EAASI,EAAMO,OAAOF,YAI/C,qBAAKP,UAAU,aAAf,SACE,0BACEK,KAAK,OACLC,YAAY,iBACZN,UAAU,qBACVO,MAAOrB,EACPsB,SAAU,SAACN,GAAD,OAAWH,EAAQG,EAAMO,OAAOF,YAI9C,wBACEH,KAAK,SACLJ,UAAU,oCAFZ,4BCrCOU,EAA6B,SAAChB,GACzC,IAAQiB,EAA+BjB,EAA/BiB,eAAgBC,EAAelB,EAAfkB,WACxB,EAA0BhB,mBAAS,IAAnC,mBAAOiB,EAAP,KAAcC,EAAd,KAEAC,qBAAU,WACR1B,IACG2B,MAAK,SAAApC,GAAQ,OAAIkC,EAASlC,QAC5B,IAsBH,OACE,mCACE,sBAAKoB,UAAU,YAAf,UACE,wCACA,cAAC,EAAD,CACEL,MAjBW,SAACZ,GAClBD,EAAQC,GACLiC,MAAK,kBAAM3B,OACX2B,MAAK,SAAApC,GAAQ,OAAIkC,EAASlC,SAiBzB,oBAAIoB,UAAU,kBAAd,SACGa,EAAMI,KAAI,SAAAC,GAAI,OACb,qBAAIlB,UAAU,kBAAd,UACE,8BACGkB,EAAKrB,QAER,sBAAKG,UAAU,qBAAf,UACE,wBACEI,KAAK,SACLJ,UAAU,2BACVmB,QAAS,kBAxBK5B,EAwBsB2B,EAAKE,QAvBvD5B,EAAWD,GACRyB,MAAK,kBAAM3B,OACX2B,MAAK,SAAApC,GAAQ,OAAIkC,EAASlC,MAHF,IAACW,GAqBhB,oBAOA,wBACEa,KAAK,SACLJ,UAAU,2BACVmB,QAAS,kBA7CHC,EA6CsBF,EAAKE,QA3C7CR,EADED,IAAmBS,EACV,EAEAA,GAJM,IAACA,GA0CR,SAKGT,IAAmBO,EAAKE,GACrB,QACA,cAnB2BF,EAAKE,eC/CzCC,EAAe,uCAAG,WAAO9B,GAAP,SAAAd,EAAA,+EACtBF,EAAQ,mBAAD,OAAoBgB,KADL,2CAAH,sDAIf+B,EAAU,uCAAG,WAAOC,GAAP,SAAA9C,EAAA,+EACjBF,EAAQ,WAAY,CACzBS,OAAQ,OACRC,QAAS,CACP,eAAgB,mCAElBC,KAAMC,KAAKC,UAAUmC,MANC,2CAAH,sDAUVC,EAAa,uCAAG,WAAOC,GAAP,SAAAhD,EAAA,+EACpBF,EAAQ,YAAD,OAAakD,GAAc,CAAEzC,OAAQ,YADxB,2CAAH,sDCRb0C,G,MAAkC,SAAChC,GAC9C,IAAQiB,EAA0BjB,EAA1BiB,eAAgBhB,EAAUD,EAAVC,MACxB,EAAwBC,mBAAS,IAAjC,mBAAOV,EAAP,KAAaa,EAAb,KAaA,OACE,uBAAMC,UAAU,iBAAiBC,SAZd,SAACC,GACpBA,EAAMC,iBAENR,EAAM,CACJJ,OAAQoB,EACRzB,SAGFa,EAAQ,KAIR,UACE,qBAAKC,UAAU,aAAf,SACE,0BACEK,KAAK,OACLC,YAAY,oBACZN,UAAU,wBACVO,MAAOrB,EACPsB,SAAU,SAACN,GAAD,OAAWH,EAAQG,EAAMO,OAAOF,YAI9C,wBACEH,KAAK,SACLJ,UAAU,uCAFZ,gCCzBO2B,G,MAA+B,SAACjC,GAC3C,IAAQiB,EAAmBjB,EAAnBiB,eACR,EAAwBf,mBAAS,MAAjC,mBAAOsB,EAAP,KAAaU,EAAb,KACA,EAAgChC,mBAAS,IAAzC,mBAAOiC,EAAP,KAAiBC,EAAjB,KACA,EAAgClC,oBAAS,GAAzC,mBAAOmC,EAAP,KAAkBC,EAAlB,KAEAjB,qBAAU,WACRzB,EAAeqB,GACZK,MAAK,SAAApC,GACJgD,EAAQhD,MAEZyC,EAAgBV,GACbK,MAAK,SAAApC,GAAQ,OAAIkD,EAAYlD,QAC/B,CAAC+B,IAkBJ,OACE,sBAAKX,UAAU,cAAf,UACE,+CAEA,yBAASA,UAAU,oBAAnB,SACE,mCAAIkB,QAAJ,IAAIA,OAAJ,EAAIA,EAAMhC,SAGZ,0BAASc,UAAU,wBAAnB,UACE,wBAAQI,KAAK,SAASJ,UAAU,SAASmB,QAb1B,WACnBa,GAAYD,IAYR,SACGA,EAAS,eACEF,EAASI,OADX,4BAEEJ,EAASI,OAFX,eAKZ,oBAAIjC,UAAU,oBAAd,SACG+B,GACC,mCACGF,EAASZ,KAAI,SAAAiB,GAAO,OACnB,qBAAIlC,UAAU,yBAAd,UACE,wBACEI,KAAK,SACLJ,UAAU,oCACVmB,QAAS,kBAjCIM,EAiCwBS,EAAQd,QAhC7DI,EAAcC,GACXT,MAAK,kBAAMK,EAAgBV,MAC3BK,MAAK,SAAApC,GAAQ,OAAIkD,EAAYlD,MAHJ,IAAC6C,GA8Bf,eAOA,4BAAIS,EAAQhD,SAR8BgD,EAAQd,cAgB9D,kCACE,qBAAKpB,UAAU,4BAAf,SACE,cAAC,EAAD,CACEW,eAAgBA,EAChBhB,MAvDY,SAAC4B,GACrBD,EAAWC,GACRP,MAAK,kBAAMK,EAAgBV,MAC3BK,MAAK,SAAApC,GAAQ,OAAIkD,EAAYlD,kBCIrBuD,EA1BO,WACpB,MAA4BvC,mBAAS,GAArC,mBAAOL,EAAP,KAAe6C,EAAf,KAEA,OACE,qBAAKpC,UAAU,MAAf,SAEE,uBAAMA,UAAU,YAAhB,UACE,qBAAKA,UAAU,eAAf,SACE,cAAC,EAAD,CACEW,eAAgBpB,EAChBqB,WAAYwB,MAIJ,IAAX7C,GACC,qBAAKS,UAAU,eAAf,SACE,cAAC,EAAD,CACEW,eAAgBpB,YClB9B8C,IAASC,OACP,cAAC,EAAD,IACAC,SAASC,eAAe,W","file":"static/js/main.11ce851b.chunk.js","sourcesContent":["export const BASE_URL = 'https://bloggy-api.herokuapp.com';\n\nexport const request = async (url:string, item = {}) => {\n  const response = await fetch(`${BASE_URL}/${url}`, item);\n\n  return response.json();\n};\n","import { request } from './api';\n\nexport const addPost = async (newPost: Post) => {\n  return request('posts', {\n    method: 'POST',\n    headers: {\n      'Content-type': 'application/json',\n    },\n    body: JSON.stringify(newPost),\n  });\n};\n\nexport const getPosts = async () => {\n  return request('posts', {\n    method: 'GET',\n    headers: {\n      'Content-type': 'application/json',\n    },\n  });\n};\n\nexport const getPostDetails = async (postId: number) => {\n  return request(`posts/${postId}?_embed=comments`);\n};\n\nexport const deletePost = async (postId: number) => {\n  return request(`posts/${postId}`, { method: 'DELETE' });\n};\n","import React, { FormEvent, useState } from 'react';\nimport './NewPostForm.scss';\n\ntype Props = {\n  onAdd: (newPost: Partial<Post>) => void;\n};\n\nexport const NewPostForm: React.FC<Props> = (props) => {\n  const { onAdd } = props;\n  const [title, setTitle] = useState('');\n  const [body, setBody] = useState('');\n\n  const handleSubmit = (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n\n    onAdd({\n      title,\n      body,\n    });\n\n    setTitle('');\n    setBody('');\n  };\n\n  return (\n    <form className=\"NewPostForm\" onSubmit={handleSubmit}>\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"title\"\n          placeholder=\"Your title\"\n          className=\"NewPostForm__input\"\n          value={title}\n          onChange={(event) => setTitle(event.target.value)}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <textarea\n          name=\"body\"\n          placeholder=\"Type post here\"\n          className=\"NewPostForm__input\"\n          value={body}\n          onChange={(event) => setBody(event.target.value)}\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        className=\"NewPostForm__submit-button button\"\n      >\n        Add a post\n      </button>\n    </form>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport { addPost, deletePost, getPosts } from '../../api/posts';\nimport './PostsList.scss';\nimport { NewPostForm } from '../NewPostForm';\n\ntype Props = {\n  selectedPostId: number;\n  selectPost: (postId :number) => void;\n};\n\nexport const PostsList: React.FC<Props> = (props) => {\n  const { selectedPostId, selectPost } = props;\n  const [posts, setPosts] = useState([] as Post[]);\n\n  useEffect(() => {\n    getPosts()\n      .then(response => setPosts(response));\n  }, []);\n\n  const handleChange = (id: number) => {\n    if (selectedPostId === id) {\n      selectPost(0);\n    } else {\n      selectPost(id);\n    }\n  };\n\n  const addNewPost = (newPost: Partial<Post>) => {\n    addPost(newPost as Post)\n      .then(() => getPosts())\n      .then(response => setPosts(response));\n  };\n\n  const deletePostFromServer = (postId: number) => {\n    deletePost(postId)\n      .then(() => getPosts())\n      .then(response => setPosts(response));\n  };\n\n  return (\n    <>\n      <div className=\"PostsList\">\n        <h2>Posts:</h2>\n        <NewPostForm\n          onAdd={addNewPost}\n        />\n\n        <ul className=\"PostsList__list\">\n          {posts.map(post => (\n            <li className=\"PostsList__item\" key={post.id}>\n              <div>\n                {post.title}\n              </div>\n              <div className=\"PostsList__buttons\">\n                <button\n                  type=\"button\"\n                  className=\"PostsList__button button\"\n                  onClick={() => deletePostFromServer(post.id)}\n                >\n                  Delete\n                </button>\n                <button\n                  type=\"button\"\n                  className=\"PostsList__button button\"\n                  onClick={() => handleChange(post.id)}\n                >\n                  {selectedPostId === post.id\n                    ? 'Close'\n                    : 'Open' }\n                </button>\n              </div>\n            </li>\n          ))}\n        </ul>\n      </div>\n    </>\n  );\n};\n","import { request } from './api';\n\nexport const getPostComments = async (postId: number) => {\n  return request(`comments?postId=${postId}`);\n};\n\nexport const addComment = async (newComment: Comment) => {\n  return request('comments', {\n    method: 'POST',\n    headers: {\n      'Content-type': 'application/json; charset=UTF-8',\n    },\n    body: JSON.stringify(newComment),\n  });\n};\n\nexport const deleteComment = async (commentsId: number) => {\n  return request(`comments/${commentsId}`, { method: 'DELETE' });\n};\n","import React, { FormEvent, useState } from 'react';\nimport './NewCommentForm.scss';\n\ntype Props = {\n  selectedPostId: number;\n  onAdd: (newComment: Partial<Comment>) => void;\n};\n\nexport const NewCommentForm: React.FC<Props> = (props) => {\n  const { selectedPostId, onAdd } = props;\n  const [body, setBody] = useState('');\n\n  const handleSubmit = (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n\n    onAdd({\n      postId: selectedPostId,\n      body,\n    });\n\n    setBody('');\n  };\n\n  return (\n    <form className=\"NewCommentForm\" onSubmit={handleSubmit}>\n      <div className=\"form-field\">\n        <textarea\n          name=\"body\"\n          placeholder=\"Type comment here\"\n          className=\"NewCommentForm__input\"\n          value={body}\n          onChange={(event) => setBody(event.target.value)}\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        className=\"NewCommentForm__submit-button button\"\n      >\n        Add a comment\n      </button>\n    </form>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport { getPostDetails } from '../../api/posts';\nimport { addComment, deleteComment, getPostComments } from '../../api/comments';\nimport { NewCommentForm } from '../NewCommentForm';\nimport './PostDetails.scss';\n\ntype Props = {\n  selectedPostId: number;\n};\n\nexport const PostDetails: React.FC<Props> = (props) => {\n  const { selectedPostId } = props;\n  const [post, setPost] = useState(null as Post | null);\n  const [comments, setComments] = useState([] as Comment[]);\n  const [isVisible, setVisible] = useState(true);\n\n  useEffect(() => {\n    getPostDetails(selectedPostId)\n      .then(response => {\n        setPost(response);\n      });\n    getPostComments(selectedPostId)\n      .then(response => setComments(response));\n  }, [selectedPostId]);\n\n  const addNewComment = (newComment: Partial<Comment>) => {\n    addComment(newComment as Comment)\n      .then(() => getPostComments(selectedPostId))\n      .then(response => setComments(response));\n  };\n\n  const deleteCommentOnServer = (commentsId: number) => {\n    deleteComment(commentsId)\n      .then(() => getPostComments(selectedPostId))\n      .then(response => setComments(response));\n  };\n\n  const handleChange = () => {\n    setVisible(!isVisible);\n  };\n\n  return (\n    <div className=\"PostDetails\">\n      <h2>Post details:</h2>\n\n      <section className=\"PostDetails__post\">\n        <p>{post?.body}</p>\n      </section>\n\n      <section className=\"PostDetails__comments\">\n        <button type=\"button\" className=\"button\" onClick={handleChange}>\n          {isVisible\n            ? `Hide ${comments.length} comments`\n            : `Show ${comments.length} comments`}\n        </button>\n\n        <ul className=\"PostDetails__list\">\n          {isVisible && (\n            <>\n              {comments.map(comment => (\n                <li className=\"PostDetails__list-item\" key={comment.id}>\n                  <button\n                    type=\"button\"\n                    className=\"PostDetails__remove-button button\"\n                    onClick={() => deleteCommentOnServer(comment.id)}\n                  >\n                    X\n                  </button>\n                  <p>{comment.body}</p>\n                </li>\n              ))}\n            </>\n          )}\n        </ul>\n      </section>\n\n      <section>\n        <div className=\"PostDetails__form-wrapper\">\n          <NewCommentForm\n            selectedPostId={selectedPostId}\n            onAdd={addNewComment}\n          />\n        </div>\n      </section>\n    </div>\n  );\n};\n","import React, { useState } from 'react';\nimport './App.scss';\nimport './styles/general.scss';\nimport { PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\n\nconst App: React.FC = () => {\n  const [postId, setPostId] = useState(0);\n\n  return (\n    <div className=\"App\">\n\n      <main className=\"App__main\">\n        <div className=\"App__sidebar\">\n          <PostsList\n            selectedPostId={postId}\n            selectPost={setPostId}\n          />\n        </div>\n\n        {postId !== 0 && (\n          <div className=\"App__content\">\n            <PostDetails\n              selectedPostId={postId}\n            />\n          </div>\n        )}\n      </main>\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport React from 'react';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}